<html>
<head>
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://code.getmdl.io/1.2.0/material.indigo-pink.min.css">
	<script defer src="https://code.getmdl.io/1.2.0/material.min.js"></script>
	<style>
		body {
			background: #3d3d3d;
		}
		.canvas-container {
			margin: 0 auto;
			display: block;
		}

		#btns img {
			width: 80px;
			height: 80px;
		}

		.mdl-layout__obfuscator.is-visible {
			display: none;
		}
		.mdl-layout__drawer-button {
			padding-top: .25em;
			margin-left: 240px;
			outline: none;
		}
		#info-download button {
			margin: 1em auto;
			display: block;
		}
	</style>
</head>
<body>

	<div class="demo-layout-transparent mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
		<header class="mdl-layout__header mdl-layout__header--transparent">
			<div class="mdl-layout__header-row">
				<!-- Title -->
				<span class="mdl-layout-title">FaeriaBoard</span>
				<!-- Add spacer, to align navigation to the right -->
				<div class="mdl-layout-spacer"></div>
				<!-- Navigation -->
				<nav class="mdl-navigation"></nav>
			</div>
		</header>

		<div class="mdl-layout__drawer">

			<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
				<div class="mdl-tabs__tab-bar">
					<a href="#lands" class="mdl-tabs__tab is-active">Land</a>
					<a href="#cards-tokens" class="mdl-tabs__tab">Card</a>
					<a href="#info-download" class="mdl-tabs__tab">DL</a>
				</div>

				<div class="mdl-tabs__panel is-active" id="lands">
					<div id="btns">
						<button rel="desertw">
							<img src="images/desertw.png"/>
						</button>
						<button rel="lakew">
							<img src="images/lakew.png"/>
						</button>
						<button rel="mountainw">
							<img src="images/mountainw.png"/>
						</button>
						<button rel="forestw">
							<img src="images/forestw.png"/>
						</button>
						<button rel="neutralw">
							<img src="images/neutralw.png"/>
						</button>

						<hr />

						<button rel="desertb">
							<img src="images/desertb.png"/>
						</button>
						<button rel="lakeb">
							<img src="images/lakeb.png"/>
						</button>
						<button rel="mountainb">
							<img src="images/mountainb.png"/>
						</button>
						<button rel="forestb">
							<img src="images/forestb.png"/>
						</button>
						<button rel="neutralb">
							<img src="images/neutralb.png"/>
						</button>
					</div>
				</div>
				<div class="mdl-tabs__panel" id="cards-tokens">
					<select>
						<option value="token_black_airelemental">black_airelemental</option>
						<option value="token_black_archerofthehills">black_archerofthehills</option>
						<option value="token_black_aurorasdisciple">black_aurorasdisciple</option>
						<option value="token_black_blazingsalamander">black_blazingsalamander</option>
						<option value="token_black_bloomsprite">black_bloomsprite</option>
						<option value="token_black_deathwishghoul">black_deathwishghoul</option>
						<option value="token_black_doppling">black_doppling</option>
						<option value="token_black_everbloomwisp">black_everbloomwisp</option>
						<option value="token_black_farmboy">black_farmboy</option>
						<option value="token_black_flamesilkfaerie">black_flamesilkfaerie</option>
						<option value="token_black_flamethrower">black_flamethrower</option>
						<option value="token_black_flowersilkfaerie">black_flowersilkfaerie</option>
						<option value="token_black_gabriancolossus">black_gabriancolossus</option>
						<option value="token_black_gabrianenchantress">black_gabrianenchantress</option>
						<option value="token_black_imperialguard">black_imperialguard</option>
						<option value="token_black_kingsguard">black_kingsguard</option>
						<option value="token_black_legend_magda">black_legend_magda</option>
						<option value="token_black_legend_magnus">black_legend_magnus</option>
						<option value="token_black_legend_sharra">black_legend_sharra</option>
						<option value="token_black_legend_tarum">black_legend_tarum</option>
						<option value="token_black_luduan">black_luduan</option>
						<option value="token_black_mightoftheforest">black_mightoftheforest</option>
						<option value="token_black_ninjatoad">black_ninjatoad</option>
						<option value="token_black_prairieyak">black_prairieyak</option>
						<option value="token_black_sagamielder">black_sagamielder</option>
						<option value="token_black_shaytandemon">black_shaytandemon</option>
						<option value="token_black_spiritofrebirth">black_spiritofrebirth</option>
						<option value="token_black_structure_altarofsouls">black_structure_altarofsouls</option>
						<option value="token_black_structure_overgrowntower">black_structure_overgrowntower</option>
						<option value="token_black_structure_sacredbamboo">black_structure_sacredbamboo</option>
						<option value="token_black_structure_tritonsanctuary">black_structure_tritonsanctuary</option>
						<option value="token_black_structure_vinewall">black_structure_vinewall</option>
						<option value="token_black_structure_windgate">black_structure_windgate</option>
						<option value="token_black_structuresteamforgey">black_structuresteamforgey</option>
						<option value="token_black_sturdyshell">black_sturdyshell</option>
						<option value="token_black_sunsilkfaerie">black_sunsilkfaerie</option>
						<option value="token_black_tikicaretaker">black_tikicaretaker</option>
						<option value="token_black_tritonlancer">black_tritonlancer</option>
						<option value="token_black_tritonwarrior">black_tritonwarrior</option>
						<option value="token_black_verduranforce">black_verduranforce</option>
						<option value="token_black_walkingfortress">black_walkingfortress</option>
						<option value="token_black_windbornemissary">black_windbornemissary</option>
						<option value="token_black_windwisp">black_windwisp</option>
						<option value="token_white_airelemental">white_airelemental</option>
						<option value="token_white_archerofthehills">white_archerofthehills</option>
						<option value="token_white_aurorasdisciple">white_aurorasdisciple</option>
						<option value="token_white_blazingsalamander">white_blazingsalamander</option>
						<option value="token_white_bloomsprite">white_bloomsprite</option>
						<option value="token_white_deathwishghoul">white_deathwishghoul</option>
						<option value="token_white_doppling">white_doppling</option>
						<option value="token_white_everbloomwisp">white_everbloomwisp</option>
						<option value="token_white_farmboy">white_farmboy</option>
						<option value="token_white_flamesilkfaerie">white_flamesilkfaerie</option>
						<option value="token_white_flamethrower">white_flamethrower</option>
						<option value="token_white_flowersilkfaerie">white_flowersilkfaerie</option>
						<option value="token_white_gabriancolossus">white_gabriancolossus</option>
						<option value="token_white_gabrianenchantress">white_gabrianenchantress</option>
						<option value="token_white_imperialguard">white_imperialguard</option>
						<option value="token_white_kingsguard">white_kingsguard</option>
						<option value="token_white_legend_magda">white_legend_magda</option>
						<option value="token_white_legend_magnus">white_legend_magnus</option>
						<option value="token_white_legend_sharra">white_legend_sharra</option>
						<option value="token_white_legend_tarum">white_legend_tarum</option>
						<option value="token_white_luduan">white_luduan</option>
						<option value="token_white_mightoftheforest">white_mightoftheforest</option>
						<option value="token_white_ninjatoad">white_ninjatoad</option>
						<option value="token_white_prairieyak">white_prairieyak</option>
						<option value="token_white_sagamielder">white_sagamielder</option>
						<option value="token_white_shaytandemon">white_shaytandemon</option>
						<option value="token_white_spiritofrebirth">white_spiritofrebirth</option>
						<option value="token_white_structure_altarofsouls">white_structure_altarofsouls</option>
						<option value="token_white_structure_overgrowntower">white_structure_overgrowntower</option>
						<option value="token_white_structure_sacredbamboo">white_structure_sacredbamboo</option>
						<option value="token_white_structure_tritonsanctuary">white_structure_tritonsanctuary</option>
						<option value="token_white_structure_vinewall">white_structure_vinewall</option>
						<option value="token_white_structure_windgate">white_structure_windgate</option>
						<option value="token_white_structuresteamforgey">white_structuresteamforgey</option>
						<option value="token_white_sturdyshell">white_sturdyshell</option>
						<option value="token_white_sunsilkfaerie">white_sunsilkfaerie</option>
						<option value="token_white_tikicaretaker">white_tikicaretaker</option>
						<option value="token_white_tritonlancer">white_tritonlancer</option>
						<option value="token_white_tritonwarrior">white_tritonwarrior</option>
						<option value="token_white_verduranforce">white_verduranforce</option>
						<option value="token_white_walkingfortress">white_walkingfortress</option>
						<option value="token_white_windbornemissary">white_windbornemissary</option>
						<option value="token_white_windwisp">white_windwisp</option>
					</select>
					<button data-add>Add</button>
				</div>
				<div class="mdl-tabs__panel" id="info-download">
					<p>
						<button data-download class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">
							<i class="material-icons">file_download</i>
							Download Image
						</button>
					</p>
				</div>
			</div>

		</div>
		<main class="mdl-layout__content">
			<canvas id="render-canvas" ></canvas>
		</main>
	</div>

	<script   src="https://code.jquery.com/jquery-3.1.0.min.js"   integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s="   crossorigin="anonymous"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.6.4/fabric.min.js"></script>
	<script src="../src/index.js"></script>
	<script>

var canvasH = window.innerWidth > 1200 ? 1200 : null;
var canvasW = window.innerHeight > 800 ? 800 : null;

var f = FaeriaBoardRenderer.create({
	canvasId: 'render-canvas',
	width: 1200,
	height: 800
});
f.render(function() {
	bindDOM();	
});
console.log(f)

function bindDOM() {
	$('#btns').on('click', 'button', function() {
		f.addLand($(this).attr('rel'));
	});
	$('button[data-download]').on('click', function() {
		window.open(f.canvas.toDataURL());
	});
	$('button[data-add]').on('click', function() {
		f.addToken($('select').val());
	});

	$('.toggle').on('click', function() {
		var $tools = $('.tool-container');
		console.log()
		if ($tools.css('left').indexOf('-') > -1) {
			return $tools.animate({
				left: 0
			});	
		}
		$tools.animate({
			left: -$tools.width()
		});
	});


	// This is a hack to replace the mdl-layout__drawer-button icon from the standard hamburger menu icon to the chat icon for our use.
    function changeIcon() {
        var _db = document.querySelector('.mdl-layout__drawer-button i');
        if (_db) {
            _db.textContent = 'settings';
        }
        if(!_db) {
            setTimeout(function() {
                changeIcon();
            }, 50);
        }
    }
    changeIcon();

}
//will accept a canvas element passed from options
//will set the width/height from options
//will use defaults if no options passed
</script>
</body>
</html>